<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="CustomerMapper">

	<select id="customerList" resultType="CustomerDto">
	SELECT OPT_ID, OPT_NO_SEQ,CUSTOMER_NO_SEQ ,CUSTOMER_TITLE, CUSTOMER_CONTENT, CUSTOMER_REGDATE
	FROM (SELECT M.OPT_ID, S.OPT_NO_SEQ,S.CUSTOMER_NO_SEQ ,S.CUSTOMER_TITLE, S.CUSTOMER_CONTENT, S.CUSTOMER_REGDATE
	FROM OPT_CUSTOMER_SERVICE S, OPT_MEMBER M 
	WHERE S.OPT_NO_SEQ = M.OPT_NO_SEQ)
	</select>
	
	<select id="customerPaging" parameterType="map" resultType="CustomerDto">
	SELECT R ,  OPT_ID, OPT_NO_SEQ,CUSTOMER_NO_SEQ ,CUSTOMER_TITLE, CUSTOMER_CONTENT, CUSTOMER_REGDATE
	FROM(SELECT ROWNUM AS R , OPT_ID, OPT_NO_SEQ,CUSTOMER_NO_SEQ ,CUSTOMER_TITLE, CUSTOMER_CONTENT, CUSTOMER_REGDATE
	FROM(SELECT M.OPT_ID, S.OPT_NO_SEQ,S.CUSTOMER_NO_SEQ ,S.CUSTOMER_TITLE, S.CUSTOMER_CONTENT, S.CUSTOMER_REGDATE
	FROM OPT_CUSTOMER_SERVICE S, OPT_MEMBER M 
	WHERE S.OPT_NO_SEQ = M.OPT_NO_SEQ ORDER BY CUSTOMER_NO_SEQ DESC))	
	WHERE R BETWEEN #{start} AND #{end}
	</select>
	
	<insert id="insertCustomerBoard" parameterType="CustomerDto">
	INSERT INTO OPT_CUSTOMER_SERVICE
		VALUES(
		#{opt_no_seq},
		CUSTOMERSEQ.NEXTVAL,
		#{customer_title},
		#{customer_content},
		SYSDATE
		)
	</insert>
	
	
</mapper>